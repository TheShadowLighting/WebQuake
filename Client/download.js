window.downloadQuakeData = async function() { const button = document.getElementById("downloadButton"); const status = document.getElementById("downloadStatus"); button.disabled = true; status.innerHTML = "Downloading Quake data..."; try { const response = await fetch("/api/download-quake", { method: "POST" }); if (response.status === 200) { status.innerHTML = "Download complete! Refresh to play with full game data."; status.style.color = "#90EE90"; } else if (response.status === 409) { status.innerHTML = "Quake data already exists!"; status.style.color = "#FFD700"; button.disabled = false; } else { const errorText = await response.text(); status.innerHTML = "Download failed: " + errorText; status.style.color = "#FF6B6B"; button.disabled = false; } } catch (error) { status.innerHTML = "Download failed: " + error.message; status.style.color = "#FF6B6B"; button.disabled = false; } };
